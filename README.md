BankingApp
===
![Code size](https://img.shields.io/github/languages/code-size/NikitaShvadlenko/BankingApp) ![GitHub commit activity](https://img.shields.io/github/commit-activity/m/NikitaShvadlenko/BankingApp) ![GitHub contributors](https://img.shields.io/github/contributors/NikitaShvadlenko/BankingApp)

## Build instructions

:mega:
**It is possible to view the project without completing Build Instructions, because the .xcodeproj file and generated files were added to the repository.**



### Required tools
:mega:
**All tools are supposed to be installed system-wide.**
1. [XcodeGen](https://github.com/yonaskolb/XcodeGen)
2. [SwiftGen](https://github.com/SwiftGen/SwiftGen)
3. [SwiftLint](https://github.com/realm/SwiftLint)
4. [Sourcery](https://github.com/krzysztofzablocki/Sourcery)
5. [Genesis](https://github.com/yonaskolb/Genesis) *(optionally, to generate modules from templates)*


* #### Change the bundle identifier and code signing options in the `project.yml` *(optionally, if you do not have an access to secrets)*

* #### Generate project
Invoke the command in the project root
```bash
xcodegen generate
```
or use the script
```bash
generate_project.sh
```
Autogenerated files will be created before generating a project file.

* #### Open the generated `BankingApp.xcodeproj` and build the scheme `BankingApp`

## Project Description
The project consists of some screens inspired by ANZgoMoney app.
The project is not intented for any other purpose, but demosntration.

- Most classes within the screens communicate via protocols. the screens are assembled in the relative screen's assembly file.
- Some views have an extended hit range, to ensure smooth user interaction.
- Used Factory pattern to create a tab bar. The required types of tabs are passed to Factory to create the tab.
- There is a generic "Session" service built on top of URLSession to ensure scalability and easy maintainability of the code.
- Various reusable UI elements were created for different screens.

## Screens and tools used:
### Tools:
Xcodegen is used to generate the .xcodeproj file. Normally I don't keep generated files in my repositories.
Swiftgen is used for generating localised strings.
Snapkit is used for creating UI layout.

### AccountsScreen
- Used VIPER architecture to seperate conserns. Most classes are covered by protocols to ensure easy testing.
- The account information is taken from Firestore. 
- Account images are taken from a seperate url.
- In case when an image can not be downloaded, a placeholder image is used.
- In case the connection to Firestore fails, alert is presented.
- Created an OverlayManager to show an overlay view when account data is fetched, also use the manager to cover the screen if an app will resign active.
- Using async/await for concurrency
- Used UserDefaults to save the account display style.

### AccountsDetailedScreen
- VIPER
- Using Diffable Data Source in the tableView
- Transactions are kept in the tableView, while the tableView itself is in the horizontal scroll view to allow pagination.
- Subclassed existing Segmented Control, but made it look similar to original app.
- Segmented control and horizontal ScrollView are connected, so changing segment will scroll and scrolling will change segment.
- Created a helper function to scroll to a certain page, the function is used in other screens in the app.
- Created a custom ShareLabel view which is used in two screens and needs a delegate for tap gestures.
- Used ScrollView to create parralax effect and implemented custom behavior for many cases of user interaction with the interface.

### TransactionDetailScreen
- VIPER
- View displays selected transaction details
- The transaction views are CollectionViewCells
- Created a custom page selection view
- Added "Share" functionality to share the transaction view

### Services Screen
- MVC - the view does not have much logic and is not using any services.
- Services screen is using a custom TabBar to present an overlay instead of usual tabbing.
- The screen routes to OpenAccountCoordinator or ApplicationsView.

### OpenAccount Screen
- Coordinator pattern
- Coordinator's ViewControllers conform to CoordinatorItem protocol which allows configuration.
- Created a OpenAccountView class that is ment to only be subclassed to ensure consistent intarface amongs several VeiwControllers.
- Created a OpenAccountViewController that is subclassed by other ViewControllers to display and handle "Cancel" button.
- Created a cutom LinkTextView to present texts with links.
- Coordinator itself conforms to delegate protocols of coordinator items to choose what to present next.  
- The ViewControllers used by coordinator are MVC because the logic is being handled by Coordinator - views simply pass the information and don't fetch any information.
- Coordinator passes collected information to Interactor, Interactor uses a Builder to build an application.
- Builder Errors are passed to Coordinator, and an alert is shown depending on what kind of error has occured.
- Once application is complete Coordinator may display ServicesScreen(it's parent) again.
- The built application is saved to CoreData

### AccountApplications Screen
- VIPER
- Applications are retrieved from CoreData container

### AccountApplicationDetail
- MVP - presenter is used to create a ViewModel from a passed CoreData item

#### Design patterns that were used in the app:
- MVC, MVP, VIPER, Coordinator - Structural
- Builder, Singelton, Factory - Creational
- Strategy, Delegate - Behavioural 
